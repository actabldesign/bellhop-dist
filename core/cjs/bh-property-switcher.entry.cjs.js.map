{"version":3,"file":"bh-property-switcher.entry.cjs.js","sources":["src/components/bh-property-switcher/bh-property-switcher.css?tag=bh-property-switcher&encapsulation=shadow","src/components/bh-property-switcher/bh-property-switcher.tsx"],"sourcesContent":[".property-switcher {\n  position: relative;\n  display: inline-block;\n  width: 220px;\n}\n\n.property-selector {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  gap: var(--spacing-xs);\n  padding: var(--spacing-xs) var(--spacing-sm);\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  border-radius: var(--radius-sm);\n  transition: background-color 0.2s ease;\n  width: 100%;\n  height: 36px;\n  min-width: 0;\n}\n\n.property-selector:hover {\n  background-color: var(--color-neutral-100);\n}\n\n.selector-icon {\n  font-size: 18px;\n  color: var(--color-neutral-500);\n  flex-shrink: 0;\n}\n\n.property-name {\n  font-family: var(--font-inter);\n  font-weight: var(--weight-medium);\n  font-size: var(--text-sm-size);\n  line-height: var(--text-sm-line);\n  color: var(--color-neutral-700);\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  flex-grow: 1;\n  min-width: 0;\n  text-align: left;\n}\n\n.expand-icon {\n  font-size: 18px;\n  flex-shrink: 0;\n  color: var(--color-neutral-400);\n  transition: color 0.2s ease;\n}\n\n/* Dropdown Panel */\n.dropdown-panel {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  z-index: 1000;\n  margin-top: var(--spacing-xs);\n  background-color: var(--color-white);\n  border: 1px solid var(--color-neutral-200);\n  border-radius: var(--radius-lg);\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12), 0 1px 4px rgba(0, 0, 0, 0.08);\n  min-width: 280px;\n  max-width: 360px;\n  animation: dropdownSlideIn 0.15s ease-out;\n  overflow: hidden;\n}\n\n@keyframes dropdownSlideIn {\n  0% {\n    opacity: 0;\n    transform: translateY(-8px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* Search Container */\n.search-container {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n  padding: var(--spacing-sm);\n  background-color: var(--color-white);\n  border-bottom: 1px solid var(--color-neutral-200);\n}\n\n.search-icon {\n  font-size: 20px;\n  color: var(--color-neutral-500);\n  flex-shrink: 0;\n}\n\n.search-input {\n  flex: 1;\n  border: none;\n  outline: none;\n  font-family: var(--font-inter);\n  font-size: var(--text-sm-size);\n  line-height: var(--text-sm-line);\n  color: var(--color-neutral-900);\n  background: transparent;\n  min-width: 0;\n}\n\n.search-input::placeholder {\n  color: var(--color-neutral-400);\n}\n\n.clear-search {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  border-radius: var(--radius-sm);\n  color: var(--color-neutral-400);\n  transition: color 0.15s ease, background-color 0.15s ease;\n}\n\n.clear-search:hover {\n  color: var(--color-neutral-600);\n  background-color: var(--color-neutral-200);\n}\n\n.clear-search .material-symbols-outlined {\n  font-size: 18px;\n}\n\n/* Dropdown Content */\n.dropdown-content {\n  max-height: 360px;\n  overflow-y: auto;\n}\n\n/* Flat List Container */\n.flat-list-container {\n  padding: var(--spacing-xs) 0;\n}\n\n/* Groups Container */\n.groups-container {\n  padding: var(--spacing-xs) 0;\n}\n\n/* Property Group */\n.property-group {\n  border-bottom: 1px solid var(--color-neutral-100);\n}\n\n.property-group:last-child {\n  border-bottom: none;\n}\n\n/* Group Header */\n.group-header {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-xs);\n  width: 100%;\n  padding: var(--spacing-sm) var(--spacing-md);\n  border: none;\n  background: var(--color-neutral-50);\n  cursor: pointer;\n  font-family: var(--font-inter);\n  font-size: var(--text-xs-size);\n  font-weight: var(--weight-semibold);\n  color: var(--color-neutral-600);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  transition: background-color 0.15s ease;\n}\n\n.group-header:hover {\n  background-color: var(--color-neutral-200);\n}\n\n.group-expand-icon {\n  font-size: 18px;\n  color: var(--color-neutral-500);\n  transition: transform 0.15s ease;\n}\n\n.group-name {\n  flex: 1;\n  text-align: left;\n}\n\n.group-count {\n  font-size: 11px;\n  font-weight: var(--weight-semibold);\n  color: var(--color-neutral-500);\n  background-color: var(--color-neutral-200);\n  padding: 2px 8px;\n  border-radius: var(--radius-full);\n  min-width: 20px;\n  text-align: center;\n}\n\n/* Group Properties */\n.group-properties {\n  padding: var(--spacing-xs) 0;\n}\n\n/* Property Item */\n.property-item {\n  display: flex;\n  align-items: center;\n  gap: var(--spacing-sm);\n  width: 100%;\n  padding: var(--spacing-sm) var(--spacing-md);\n  padding-left: calc(var(--spacing-md) + 26px);\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  font-family: var(--font-inter);\n  font-size: var(--text-sm-size);\n  line-height: var(--text-sm-line);\n  color: var(--color-neutral-700);\n  text-align: left;\n  transition: background-color 0.15s ease;\n}\n\n.flat-list-container .property-item {\n  padding-left: var(--spacing-md);\n}\n\n.property-item:hover {\n  background-color: var(--color-neutral-100);\n}\n\n.property-item.selected {\n  background-color: var(--color-brand-50);\n  color: var(--color-brand-700);\n}\n\n.property-item.selected .property-icon {\n  color: var(--color-brand-600);\n}\n\n.property-icon {\n  font-size: 20px;\n  color: var(--color-neutral-400);\n  flex-shrink: 0;\n}\n\n.property-item-name {\n  flex: 1;\n  min-width: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font-weight: var(--weight-regular);\n}\n\n.property-item.selected .property-item-name {\n  font-weight: var(--weight-medium);\n}\n\n.check-icon {\n  font-size: 18px;\n  color: var(--color-brand-600);\n  flex-shrink: 0;\n}\n\n/* Menu Divider */\n.menu-divider {\n  height: 1px;\n  background-color: var(--color-neutral-150);\n  margin: var(--spacing-xs) var(--spacing-md);\n}\n\n/* Empty State */\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: var(--spacing-2xl) var(--spacing-lg);\n  gap: var(--spacing-sm);\n}\n\n.empty-icon {\n  font-size: 40px;\n  color: var(--color-neutral-300);\n}\n\n.empty-text {\n  font-family: var(--font-inter);\n  font-size: var(--text-sm-size);\n  color: var(--color-neutral-500);\n}\n\n/* Legacy dropdown menu container (for backwards compatibility) */\n.dropdown-menu-container {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  z-index: 1000;\n  margin-top: var(--spacing-xs);\n  max-height: 320px;\n}\n\n/* Legacy popover animations */\n.popover-container {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  z-index: 1000;\n  margin-top: var(--spacing-xs);\n  animation: popoverSlideIn 0.3s ease-out;\n  transform-origin: top center;\n}\n\n@keyframes popoverSlideIn {\n  0% {\n    opacity: 0;\n    transform: translateY(calc(-1 * var(--spacing-lg)));\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.popover-container.closing {\n  animation: popoverSlideOut 0.2s ease-in forwards;\n}\n\n@keyframes popoverSlideOut {\n  0% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n  100% {\n    opacity: 0;\n    transform: translateY(calc(-1 * var(--spacing-lg)));\n  }\n}\n","import { Component, Prop, Event, EventEmitter, State, h, Host, Listen } from '@stencil/core';\n\nexport interface PropertyOption {\n  id: string;\n  name: string;\n  type: 'portfolio' | 'region' | 'property';\n  group?: string;\n}\n\nexport interface PropertyGroup {\n  id: string;\n  name: string;\n  properties: PropertyOption[];\n}\n\nexport interface DropdownMenuItem {\n  id: string;\n  label?: string;\n  icon?: string;\n  divider?: boolean;\n}\n\n@Component({\n  tag: 'bh-property-switcher',\n  styleUrl: 'bh-property-switcher.css',\n  shadow: true,\n})\nexport class BhPropertySwitcher {\n  /**\n   * Selected property name to display (initial value)\n   */\n  @Prop() selectedProperty: string = 'Select a property';\n\n  /**\n   * Array of property options\n   */\n  @Prop() properties: PropertyOption[] = [];\n\n  /**\n   * Whether to group properties by their group field\n   */\n  @Prop() grouped: boolean = false;\n\n  /**\n   * Placeholder text for search input\n   */\n  @Prop() searchPlaceholder: string = 'Search properties...';\n\n  /**\n   * Event emitted when a property is selected\n   */\n  @Event() bhPropertyChange!: EventEmitter<PropertyOption>;\n\n  @State() isExpanded: boolean = false;\n  @State() searchQuery: string = '';\n  @State() expandedGroups: Set<string> = new Set();\n  @State() internalSelectedProperty: string = '';\n\n  private switcherRef?: HTMLDivElement;\n  private searchInputRef?: HTMLInputElement;\n\n  componentWillLoad() {\n    this.internalSelectedProperty = this.selectedProperty;\n  }\n\n  @Listen('click', { target: 'document' })\n  handleDocumentClick(event: MouseEvent) {\n    if (!this.isExpanded) {\n      return;\n    }\n\n    // Check if click is on this component or inside it using composedPath for Shadow DOM\n    const clickedInside = event.composedPath().includes(this.switcherRef as any);\n\n    if (!clickedInside) {\n      this.isExpanded = false;\n    }\n  }\n\n  private handleToggle = () => {\n    this.isExpanded = !this.isExpanded;\n    if (this.isExpanded) {\n      this.searchQuery = '';\n      // Initialize all groups as expanded when opening\n      if (this.grouped) {\n        const groups = this.getPropertyGroups();\n        this.expandedGroups = new Set(groups.map(g => g.id));\n      }\n      // Focus search input when opening\n      setTimeout(() => {\n        if (this.searchInputRef) {\n          this.searchInputRef.focus();\n        }\n      }, 50);\n    }\n  }\n\n  private handleSearchInput = (event: Event) => {\n    const target = event.target as HTMLInputElement;\n    this.searchQuery = target.value;\n  }\n\n  private handleGroupToggle = (groupId: string) => {\n    const newSet = new Set(this.expandedGroups);\n    if (newSet.has(groupId)) {\n      newSet.delete(groupId);\n    } else {\n      newSet.add(groupId);\n    }\n    this.expandedGroups = newSet;\n  }\n\n  private handlePropertySelect = (property: PropertyOption) => {\n    this.internalSelectedProperty = property.name;\n    this.bhPropertyChange.emit(property);\n    this.isExpanded = false;\n    this.searchQuery = '';\n  }\n\n  private getPropertyGroups = (): PropertyGroup[] => {\n    const groupMap = new Map<string, PropertyOption[]>();\n    const ungrouped: PropertyOption[] = [];\n\n    this.properties.forEach((property) => {\n      if (property.group) {\n        const existing = groupMap.get(property.group) || [];\n        existing.push(property);\n        groupMap.set(property.group, existing);\n      } else {\n        ungrouped.push(property);\n      }\n    });\n\n    const groups: PropertyGroup[] = [];\n\n    groupMap.forEach((properties, name) => {\n      groups.push({\n        id: name.toLowerCase().replace(/\\s+/g, '-'),\n        name,\n        properties,\n      });\n    });\n\n    // Add ungrouped properties as a special group if any exist\n    if (ungrouped.length > 0) {\n      groups.push({\n        id: 'ungrouped',\n        name: 'Other',\n        properties: ungrouped,\n      });\n    }\n\n    return groups;\n  }\n\n  private filterProperties = (properties: PropertyOption[]): PropertyOption[] => {\n    if (!this.searchQuery.trim()) {\n      return properties;\n    }\n    const query = this.searchQuery.toLowerCase();\n    return properties.filter((p) =>\n      p.name.toLowerCase().includes(query)\n    );\n  }\n\n  private filterGroups = (groups: PropertyGroup[]): PropertyGroup[] => {\n    if (!this.searchQuery.trim()) {\n      return groups;\n    }\n    const query = this.searchQuery.toLowerCase();\n\n    return groups\n      .map((group) => {\n        // Check if group name matches\n        const groupMatches = group.name.toLowerCase().includes(query);\n        // Filter properties within the group\n        const filteredProperties = group.properties.filter((p) =>\n          p.name.toLowerCase().includes(query)\n        );\n\n        // Include group if group name matches (show all properties) or if any properties match\n        if (groupMatches) {\n          return { ...group }; // Return group with all properties\n        } else if (filteredProperties.length > 0) {\n          return { ...group, properties: filteredProperties };\n        }\n        return null;\n      })\n      .filter((g): g is PropertyGroup => g !== null);\n  }\n\n  private getPropertyIcon = (type: PropertyOption['type']): string => {\n    switch (type) {\n      case 'portfolio':\n        return 'business';\n      case 'region':\n        return 'public';\n      case 'property':\n      default:\n        return 'location_on';\n    }\n  }\n\n  private renderSearchInput() {\n    return (\n      <div class=\"search-container\">\n        <span class=\"material-symbols-outlined search-icon\">search</span>\n        <input\n          ref={(el) => (this.searchInputRef = el)}\n          type=\"text\"\n          class=\"search-input\"\n          placeholder={this.searchPlaceholder}\n          value={this.searchQuery}\n          onInput={this.handleSearchInput}\n          onClick={(e) => e.stopPropagation()}\n        />\n        {this.searchQuery && (\n          <button\n            class=\"clear-search\"\n            onClick={(e) => {\n              e.stopPropagation();\n              this.searchQuery = '';\n              this.searchInputRef?.focus();\n            }}\n            aria-label=\"Clear search\"\n          >\n            <span class=\"material-symbols-outlined\">close</span>\n          </button>\n        )}\n      </div>\n    );\n  }\n\n  private renderPropertyItem(property: PropertyOption) {\n    const isSelected = property.name === this.internalSelectedProperty;\n    return (\n      <button\n        class={{\n          'property-item': true,\n          'selected': isSelected,\n        }}\n        onClick={() => this.handlePropertySelect(property)}\n      >\n        <span class=\"material-symbols-outlined property-icon\">\n          {this.getPropertyIcon(property.type)}\n        </span>\n        <span class=\"property-item-name\" title={property.name}>\n          {property.name}\n        </span>\n        {isSelected && (\n          <span class=\"material-symbols-outlined check-icon\">check</span>\n        )}\n      </button>\n    );\n  }\n\n  private renderGroupedView() {\n    const groups = this.getPropertyGroups();\n    const filteredGroups = this.filterGroups(groups);\n\n    if (filteredGroups.length === 0) {\n      return this.renderEmptyState();\n    }\n\n    return (\n      <div class=\"groups-container\">\n        {filteredGroups.map((group) => {\n          const isExpanded = this.expandedGroups.has(group.id);\n          return (\n            <div class=\"property-group\" key={group.id}>\n              <button\n                class={{\n                  'group-header': true,\n                  'expanded': isExpanded,\n                }}\n                onClick={() => this.handleGroupToggle(group.id)}\n                aria-expanded={isExpanded ? 'true' : 'false'}\n              >\n                <span class=\"material-symbols-outlined group-expand-icon\">\n                  {isExpanded ? 'expand_more' : 'chevron_right'}\n                </span>\n                <span class=\"group-name\">{group.name}</span>\n                <span class=\"group-count\">{group.properties.length}</span>\n              </button>\n              {isExpanded && (\n                <div class=\"group-properties\">\n                  {group.properties.map((property) => (\n                    <div key={property.id}>\n                      {this.renderPropertyItem(property)}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n\n  private renderFlatView() {\n    const filteredProperties = this.filterProperties(this.properties);\n\n    if (filteredProperties.length === 0) {\n      return this.renderEmptyState();\n    }\n\n    // Legacy behavior: render portfolios with dividers, skip regions\n    const items: (PropertyOption | { divider: true })[] = [];\n\n    filteredProperties.forEach((property) => {\n      if (property.type === 'portfolio') {\n        items.push(property);\n        items.push({ divider: true });\n      } else if (property.type === 'property') {\n        items.push(property);\n      }\n    });\n\n    return (\n      <div class=\"flat-list-container\">\n        {items.map((item, index) => {\n          if ('divider' in item) {\n            return <div class=\"menu-divider\" key={`divider-${index}`} />;\n          }\n          return (\n            <div key={item.id}>\n              {this.renderPropertyItem(item)}\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n\n  private renderEmptyState() {\n    return (\n      <div class=\"empty-state\">\n        <span class=\"material-symbols-outlined empty-icon\">search_off</span>\n        <span class=\"empty-text\">No properties found</span>\n      </div>\n    );\n  }\n\n  private getSelectedProperty(): PropertyOption | undefined {\n    return this.properties.find(p => p.name === this.internalSelectedProperty);\n  }\n\n  render() {\n    const containerClasses = {\n      'property-switcher': true,\n      'expanded': this.isExpanded,\n    };\n\n    const selectedProp = this.getSelectedProperty();\n    const displayName = this.internalSelectedProperty || this.selectedProperty;\n\n    return (\n      <Host>\n        <div\n          ref={(el) => (this.switcherRef = el)}\n          class={containerClasses}\n        >\n          <button\n            class=\"property-selector\"\n            onClick={() => this.handleToggle()}\n            aria-expanded={this.isExpanded ? 'true' : 'false'}\n            aria-label={`Property selector: ${displayName}`}\n          >\n            {selectedProp && (\n              <span class=\"material-symbols-outlined selector-icon\">\n                {this.getPropertyIcon(selectedProp.type)}\n              </span>\n            )}\n            <span class=\"property-name\">{displayName}</span>\n            <span\n              class=\"material-symbols-outlined expand-icon\"\n              aria-label={this.isExpanded ? 'Collapse Options' : 'Expand Options'}\n            >\n              {this.isExpanded ? 'unfold_less' : 'unfold_more'}\n            </span>\n          </button>\n\n          {this.isExpanded && (\n            <div class=\"dropdown-panel\">\n              {this.renderSearchInput()}\n              <div class=\"dropdown-content\">\n                {this.grouped\n                  ? this.renderGroupedView()\n                  : this.renderFlatView()\n                }\n              </div>\n            </div>\n          )}\n        </div>\n      </Host>\n    );\n  }\n}\n"],"names":["h","index","Host"],"mappings":"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"}