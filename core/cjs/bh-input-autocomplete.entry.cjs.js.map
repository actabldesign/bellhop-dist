{"version":3,"file":"bh-input-autocomplete.entry.cjs.js","sources":["src/components/bh-input-autocomplete/bh-input-autocomplete.css?tag=bh-input-autocomplete&encapsulation=shadow","src/components/bh-input-autocomplete/bh-input-autocomplete.tsx"],"sourcesContent":["@import '../../global/global.css';\n\n:host {\n  display: block;\n  position: relative;\n}\n\n.input-autocomplete-wrapper {\n  position: relative;\n}\n\n.input-wrapper {\n  display: flex;\n  flex-direction: column;\n  gap: var(--spacing-sm);\n}\n\n/* Multi-select input field */\n.input-field {\n  display: flex;\n  align-items: center;\n  min-height: 44px;\n  padding: var(--spacing-sm) var(--spacing-md);\n  background: var(--color-white);\n  border: 1px solid var(--color-neutral-300);\n  border-radius: var(--radius-md);\n  transition: all 0.15s ease;\n}\n\n.input-field.input-hover {\n  border-color: var(--color-neutral-400);\n}\n\n.input-field.input-focused {\n  border-color: var(--color-brand-500);\n  box-shadow: 0 0 0 4px var(--color-brand-50);\n}\n\n.input-field.input-error {\n  border-color: var(--color-error-500);\n}\n\n.input-field.input-error.input-focused {\n  box-shadow: 0 0 0 4px var(--color-error-50);\n}\n\n.input-field.input-disabled {\n  background: var(--color-neutral-50);\n  cursor: not-allowed;\n}\n\n.input-content-flow {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  gap: var(--spacing-xs);\n  width: 100%;\n}\n\n.leading-icon {\n  font-size: 20px;\n  color: var(--color-neutral-500);\n  flex-shrink: 0;\n}\n\n.inline-input {\n  flex: 1;\n  min-width: 60px;\n  border: none;\n  outline: none;\n  background: transparent;\n  font-family: var(--font-inter);\n  font-size: var(--text-md-size);\n  line-height: var(--text-md-line);\n  color: var(--color-neutral-900);\n}\n\n.inline-input::placeholder {\n  color: var(--color-neutral-500);\n}\n\n.inline-input:disabled {\n  cursor: not-allowed;\n  color: var(--color-neutral-400);\n}\n\n.hint-text {\n  font-family: var(--font-inter);\n  font-size: var(--text-sm-size);\n  line-height: var(--text-sm-line);\n  color: var(--color-neutral-600);\n  transition: opacity 0.15s ease;\n}\n\n.hint-text.hint-error {\n  color: var(--color-error-600);\n}\n","import { Component, Prop, State, Event, EventEmitter, Element, Watch, h, Host } from '@stencil/core';\nimport { AutocompleteMenuItem } from '../bh-autocomplete-menu/bh-autocomplete-menu';\n\nexport type InputAutocompleteState = 'placeholder' | 'filled' | 'hover' | 'focused';\n\n@Component({\n  tag: 'bh-input-autocomplete',\n  styleUrl: 'bh-input-autocomplete.css',\n  shadow: true,\n})\nexport class BhInputAutocomplete {\n  @Element() el!: HTMLElement;\n\n  // Base input props\n  /**\n   * Input state\n   */\n  @Prop() state?: InputAutocompleteState;\n\n  /**\n   * Whether input has error\n   */\n  @Prop() error: boolean = false;\n\n  /**\n   * Whether input is required\n   */\n  @Prop() required: boolean = false;\n\n  /**\n   * Whether input is disabled\n   */\n  @Prop() disabled: boolean = false;\n\n  /**\n   * Whether to show help icon\n   */\n  @Prop() showHelpIcon: boolean = false;\n\n  /**\n   * Whether to show leading icon\n   */\n  @Prop() showLeadingIcon: boolean = true;\n\n  /**\n   * Whether to show label\n   */\n  @Prop() showLabel: boolean = true;\n\n  /**\n   * Whether to show hint text\n   */\n  @Prop() showHintText: boolean = true;\n\n  /**\n   * Label text\n   */\n  @Prop() label: string = 'Search';\n\n  /**\n   * Placeholder text\n   */\n  @Prop() placeholder: string = 'Search...';\n\n  /**\n   * Hint text\n   */\n  @Prop() hintText: string = 'This is a hint text to help user.';\n\n  /**\n   * Leading icon name\n   */\n  @Prop() leadingIcon: string = 'search';\n\n  /**\n   * Help icon tooltip\n   */\n  @Prop() helpIconTooltip: string = 'Help';\n\n  /**\n   * Current value\n   */\n  @Prop({ mutable: true }) value: string = '';\n\n  /**\n   * Width of the component\n   */\n  @Prop() width: string = '450px';\n\n  // Autocomplete-specific props\n  /**\n   * Available options\n   */\n  @Prop() options: AutocompleteMenuItem[] = [];\n\n  /**\n   * Maximum number of options to show\n   */\n  @Prop() maxOptions: number = 10;\n\n  /**\n   * Enable multi-select mode\n   */\n  @Prop() multiSelect: boolean = false;\n\n  /**\n   * Minimum search length to show options\n   */\n  @Prop() minSearchLength: number = 3;\n\n  /**\n   * Selected items (for multi-select)\n   */\n  @Prop({ mutable: true }) selectedItems: AutocompleteMenuItem[] = [];\n\n  @State() showDropdown: boolean = false;\n  @State() focusedOptionIndex: number = -1;\n  @State() isFocused: boolean = false;\n  @State() isHovered: boolean = false;\n  @State() isTagClickOpen: boolean = false;\n\n  /**\n   * Event emitted when value changes\n   */\n  @Event() bhChange!: EventEmitter<string>;\n\n  /**\n   * Event emitted when selected items change\n   */\n  @Event() bhSelectedItemsChange!: EventEmitter<AutocompleteMenuItem[]>;\n\n  /**\n   * Event emitted when input is focused\n   */\n  @Event() bhFocus!: EventEmitter<void>;\n\n  /**\n   * Event emitted when input is blurred\n   */\n  @Event() bhBlur!: EventEmitter<void>;\n\n  /**\n   * Event emitted when help icon is clicked\n   */\n  @Event() bhHelpClick!: EventEmitter<void>;\n\n  /**\n   * Event emitted when an option is selected\n   */\n  @Event() bhOptionSelect!: EventEmitter<AutocompleteMenuItem>;\n\n  @Watch('value')\n  handleValueChange(newValue: string) {\n    if (newValue && newValue.length >= this.minSearchLength) {\n      this.showDropdown = true;\n    }\n  }\n\n  private get filteredOptions(): AutocompleteMenuItem[] {\n    let baseOptions: AutocompleteMenuItem[] = [];\n\n    if (this.isTagClickOpen && this.multiSelect) {\n      baseOptions = this.selectedItems;\n    } else if (this.showDropdown && (!this.value || this.value.length === 0)) {\n      baseOptions = this.options.slice(0, this.maxOptions);\n    } else if (this.value && this.value.length >= this.minSearchLength) {\n      const searchLower = this.value.toLowerCase();\n      const filtered = this.options.filter(option =>\n        option.label.toLowerCase().includes(searchLower)\n      );\n      baseOptions = filtered.slice(0, this.maxOptions);\n    }\n\n    return baseOptions.map(option => ({\n      ...option,\n      selected: this.multiSelect && this.selectedItems.some(item => item.id === option.id),\n    }));\n  }\n\n  private get shouldShowClearButton(): boolean {\n    return !this.disabled && (\n      (this.multiSelect && this.selectedItems.length > 0) ||\n      (!this.multiSelect && Boolean(this.value && this.value.length > 0))\n    );\n  }\n\n  private get visibleTags(): { tags: AutocompleteMenuItem[]; remaining: number } {\n    if (!this.multiSelect || this.selectedItems.length === 0) {\n      return { tags: [], remaining: 0 };\n    }\n\n    const containerWidth = parseFloat(this.width.replace('px', '')) || 450;\n    const searchIconWidth = this.showLeadingIcon ? 40 : 0;\n    const clearButtonWidth = this.shouldShowClearButton ? 32 : 0;\n    const inputFieldMinWidth = 60;\n    const padding = 24;\n    const reservedWidth = searchIconWidth + clearButtonWidth + inputFieldMinWidth + padding;\n    const availableWidth = Math.max(containerWidth - reservedWidth, 80);\n\n    let currentWidth = 0;\n    const visibleTagsList: AutocompleteMenuItem[] = [];\n    const tagSpacing = 8;\n    const counterWidth = 40;\n\n    const reversedItems = [...this.selectedItems].reverse();\n\n    for (let i = 0; i < reversedItems.length; i++) {\n      const tag = reversedItems[i];\n      const baseTagWidth = Math.min(tag.label.length * 8 + 36, 150);\n      const remainingAfterThis = reversedItems.length - (i + 1);\n      const needsCounter = remainingAfterThis > 0;\n      const totalRequiredWidth = currentWidth + baseTagWidth + (needsCounter ? counterWidth : 0);\n\n      if (totalRequiredWidth <= availableWidth) {\n        visibleTagsList.push(tag);\n        currentWidth += baseTagWidth + tagSpacing;\n      } else {\n        break;\n      }\n    }\n\n    const finalVisibleTags = visibleTagsList.reverse();\n    return {\n      tags: finalVisibleTags,\n      remaining: this.selectedItems.length - finalVisibleTags.length,\n    };\n  }\n\n  private handleInputChange = (e: Event) => {\n    const target = e.target as HTMLInputElement;\n    this.value = target.value;\n    this.bhChange.emit(this.value);\n    this.isTagClickOpen = false;\n\n    if (this.value.length >= this.minSearchLength) {\n      this.focusedOptionIndex = -1;\n    } else {\n      this.showDropdown = false;\n    }\n  };\n\n  private handleInputFocus = () => {\n    this.isFocused = true;\n    this.bhFocus.emit();\n\n    if (this.value && this.value.length >= this.minSearchLength && this.filteredOptions.length > 0) {\n      this.showDropdown = true;\n    }\n  };\n\n  private getInputTextState(): 'default' | 'hover' | 'focus' | 'filled' | 'disabled' | 'error' | undefined {\n    if (this.state === 'placeholder') {\n      return 'default';\n    }\n    if (this.state === 'focused') {\n      return 'focus';\n    }\n    return this.state as 'default' | 'hover' | 'focus' | 'filled' | 'disabled' | 'error' | undefined;\n  }\n\n  private handleInputBlur = () => {\n    setTimeout(() => {\n      this.isFocused = false;\n      this.showDropdown = false;\n      this.focusedOptionIndex = -1;\n      this.isTagClickOpen = false;\n      this.bhBlur.emit();\n    }, 200);\n  };\n\n  private handleOptionSelect = (event: CustomEvent<AutocompleteMenuItem>) => {\n    const option = event.detail;\n    if (option.disabled) return;\n\n    this.bhOptionSelect.emit(option);\n\n    if (this.multiSelect) {\n      const isSelected = this.selectedItems.some(item => item.id === option.id);\n      const newItems = isSelected\n        ? this.selectedItems.filter(item => item.id !== option.id)\n        : [...this.selectedItems, option];\n\n      this.selectedItems = newItems;\n      this.bhSelectedItemsChange.emit(newItems);\n      this.value = '';\n      this.bhChange.emit('');\n      this.isTagClickOpen = false;\n      this.showDropdown = false;\n    } else {\n      this.value = option.label;\n      this.bhChange.emit(option.label);\n      this.showDropdown = false;\n    }\n  };\n\n  private handleTagRemove = (tag: AutocompleteMenuItem) => {\n    const newItems = this.selectedItems.filter(item => item.id !== tag.id);\n    this.selectedItems = newItems;\n    this.bhSelectedItemsChange.emit(newItems);\n  };\n\n  private handleTagClick = (e: MouseEvent) => {\n    if ((e.target as HTMLElement).closest('.tag-dismiss')) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!this.disabled) {\n      this.isTagClickOpen = true;\n      this.showDropdown = true;\n      this.isFocused = true;\n    }\n  };\n\n  private handleClearAll = () => {\n    if (this.multiSelect) {\n      this.selectedItems = [];\n      this.bhSelectedItemsChange.emit([]);\n    }\n    this.value = '';\n    this.bhChange.emit('');\n  };\n\n  private handleKeyDown = (e: KeyboardEvent) => {\n    if (!this.showDropdown || this.filteredOptions.length === 0) return;\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        this.focusedOptionIndex = this.focusedOptionIndex < this.filteredOptions.length - 1\n          ? this.focusedOptionIndex + 1\n          : 0;\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        this.focusedOptionIndex = this.focusedOptionIndex > 0\n          ? this.focusedOptionIndex - 1\n          : this.filteredOptions.length - 1;\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (this.focusedOptionIndex >= 0 && this.focusedOptionIndex < this.filteredOptions.length) {\n          const option = this.filteredOptions[this.focusedOptionIndex];\n          this.handleOptionSelect({ detail: option } as CustomEvent<AutocompleteMenuItem>);\n        }\n        break;\n      case 'Escape':\n        e.preventDefault();\n        this.showDropdown = false;\n        this.focusedOptionIndex = -1;\n        break;\n    }\n  };\n\n  private handleItemHover = (event: CustomEvent<number>) => {\n    this.focusedOptionIndex = event.detail;\n  };\n\n  render() {\n    const { tags, remaining } = this.visibleTags;\n\n    return (\n      <Host>\n        <div\n          class=\"input-autocomplete-wrapper\"\n          style={{ width: this.width }}\n          onKeyDown={this.handleKeyDown}\n        >\n          {this.multiSelect ? (\n            // Multi-select input with flowing tags\n            <div class=\"input-wrapper\">\n              <bh-label\n                label={this.showLabel ? this.label : ''}\n                required={this.required}\n                showHelpIcon={this.showHelpIcon}\n                helpIconTooltip={this.helpIconTooltip}\n                disabled={this.disabled}\n                onBhHelpClick={() => this.bhHelpClick.emit()}\n              >\n              <div\n                class={{\n                  'input-field': true,\n                  'autocomplete-multi-input': true,\n                  'input-error': this.error,\n                  'input-disabled': this.disabled,\n                  'input-focused': this.isFocused,\n                  'input-hover': this.isHovered,\n                }}\n                onMouseEnter={() => !this.isFocused && (this.isHovered = true)}\n                onMouseLeave={() => (this.isHovered = false)}\n              >\n                <div class=\"input-content-flow\">\n                  {this.showLeadingIcon && (\n                    <span class=\"leading-icon material-symbols-outlined\">\n                      {this.leadingIcon}\n                    </span>\n                  )}\n\n                  {/* Tags */}\n                  {tags.map(tag => (\n                    <div\n                      key={tag.id}\n                      onClick={this.handleTagClick}\n                      onMouseDown={e => e.preventDefault()}\n                      style={{ cursor: 'pointer' }}\n                    >\n                      <bh-tag\n                        variant=\"text-only\"\n                        size=\"sm\"\n                        label={tag.label}\n                        dismissible={!this.disabled}\n                        disabled={this.disabled}\n                        maxWidth={150}\n                        onBhDismiss={() => this.handleTagRemove(tag)}\n                      ></bh-tag>\n                    </div>\n                  ))}\n\n                  {remaining > 0 && (\n                    <div\n                      onClick={this.handleTagClick}\n                      onMouseDown={e => e.preventDefault()}\n                      style={{ cursor: 'pointer' }}\n                    >\n                      <bh-tag\n                        variant=\"text-only\"\n                        size=\"sm\"\n                        label={`+${remaining}`}\n                        dismissible={false}\n                        disabled={this.disabled}\n                      ></bh-tag>\n                    </div>\n                  )}\n\n                  <input\n                    type=\"text\"\n                    value={this.value}\n                    placeholder={tags.length === 0 ? this.placeholder : ''}\n                    disabled={this.disabled}\n                    class=\"inline-input\"\n                    onInput={this.handleInputChange}\n                    onFocus={this.handleInputFocus}\n                    onBlur={this.handleInputBlur}\n                  />\n\n                  {this.shouldShowClearButton && (\n                    <bh-button-icon\n                      hierarchy=\"tertiary\"\n                      size=\"xs\"\n                      iconName=\"close\"\n                      onBhClick={this.handleClearAll}\n                      disabled={this.disabled}\n                    ></bh-button-icon>\n                  )}\n                </div>\n              </div>\n              </bh-label>\n\n              {this.showHintText && this.hintText && (\n                <div\n                  class={{ 'hint-text': true, 'hint-error': this.error }}\n                  style={{ opacity: this.showDropdown ? '0' : '1' }}\n                >\n                  {this.hintText}\n                </div>\n              )}\n            </div>\n          ) : (\n            // Standard single-select using bh-input-text\n            <bh-input-text\n              state={this.getInputTextState()}\n              error={this.error}\n              required={this.required}\n              disabled={this.disabled}\n              showHelpIcon={this.showHelpIcon}\n              showLeadingIcon={this.showLeadingIcon}\n              showLabel={this.showLabel}\n              showHintText={this.showHintText}\n              label={this.label}\n              placeholder={this.placeholder}\n              hintText={this.hintText}\n              leadingIcon={this.leadingIcon}\n              helpIconTooltip={this.helpIconTooltip}\n              value={this.value}\n              width=\"100%\"\n              onBhInput={(e: CustomEvent<string>) => {\n                this.value = e.detail;\n                this.bhChange.emit(this.value);\n                this.isTagClickOpen = false;\n                if (this.value.length >= this.minSearchLength) {\n                  this.showDropdown = true;\n                } else {\n                  this.showDropdown = false;\n                }\n              }}\n              onBhFocus={this.handleInputFocus}\n              onBhBlur={this.handleInputBlur}\n              onBhHelpClick={() => this.bhHelpClick.emit()}\n            ></bh-input-text>\n          )}\n\n          {/* Dropdown menu */}\n          <bh-autocomplete-menu\n            visible={this.showDropdown}\n            menuItems={this.filteredOptions}\n            selectedIndex={this.focusedOptionIndex}\n            multiSelect={this.multiSelect}\n            searchQuery={this.value}\n            onBhItemClick={this.handleOptionSelect}\n            onBhItemHover={this.handleItemHover}\n          ></bh-autocomplete-menu>\n        </div>\n      </Host>\n    );\n  }\n}\n"],"names":["h","Host"],"mappings":"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"}