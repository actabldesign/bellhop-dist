{"version":3,"file":"bh-pie-chart.entry.esm.js","sources":["src/components/bh-pie-chart/bh-pie-chart.css?tag=bh-pie-chart&encapsulation=shadow","src/components/bh-pie-chart/bh-pie-chart.tsx"],"sourcesContent":["@import '../../global/global.css';\n\n:host {\n  display: inline-block;\n}\n\n.pie-chart-container {\n  display: inline-block;\n  width: 160px;\n  height: 160px;\n  overflow: visible;\n}\n\n.pie-chart-svg {\n  width: 100%;\n  height: 100%;\n  overflow: visible;\n}\n\n.pie-segment {\n  cursor: pointer;\n  transition: opacity var(--animation-duration-fast, 0.1s) var(--animation-ease-smooth, ease);\n  transform-origin: 80px 80px;\n}\n\n.pie-segment.animated {\n  opacity: 0;\n  transform: scale(0.3) rotate(-180deg);\n  animation: pieSliceReveal 0.8s var(--animation-ease-enter, ease-out) forwards;\n}\n\n.pie-segment:hover {\n  opacity: 0.85;\n  transform: scale(1.05);\n  filter: brightness(1.1);\n  transition: all var(--animation-duration-fast, 0.1s) var(--animation-ease-smooth, ease);\n}\n\n.pie-background {\n  pointer-events: none;\n}\n\n.pie-inner-hole {\n  pointer-events: none;\n}\n\n.pie-segment-group {\n  pointer-events: auto;\n}\n\n@keyframes pieSliceReveal {\n  0% {\n    opacity: 0;\n    transform: scale(0.3) rotate(-180deg);\n  }\n  15% {\n    opacity: 0.2;\n    transform: scale(0.45) rotate(-135deg);\n  }\n  30% {\n    opacity: 0.5;\n    transform: scale(0.7) rotate(-70deg);\n  }\n  45% {\n    opacity: 0.7;\n    transform: scale(0.9) rotate(-25deg);\n  }\n  60% {\n    opacity: 0.85;\n    transform: scale(1.05) rotate(-8deg);\n  }\n  80% {\n    opacity: 0.95;\n    transform: scale(1.01) rotate(-1deg);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1) rotate(0deg);\n  }\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .pie-segment.animated {\n    animation: none;\n    opacity: 1;\n    transform: none;\n  }\n}\n","import { Component, Prop, State, h, Host } from '@stencil/core';\n\nexport interface PieChartSeriesItem {\n  name: string;\n  value: number;\n  color?: string;\n}\n\nexport interface PieChartData {\n  series: PieChartSeriesItem[];\n}\n\nexport interface PieSegment {\n  value: number;\n  percentage: number;\n  startAngle: number;\n  endAngle: number;\n  color: string;\n  name: string;\n  path: string;\n}\n\nexport type PieChartHole = 'none' | '25%' | '50%' | '75%' | '85%';\n\nconst DEFAULT_COLORS = [\n  '#2642CF', // Blue\n  '#8E4B9B', // Purple\n  '#BB81BA', // Light Purple\n  '#E14C94', // Pink\n  '#E47789', // Coral\n  '#E9AAAE', // Light Coral\n  '#BACEFC', // Light Blue\n];\n\n@Component({\n  tag: 'bh-pie-chart',\n  styleUrl: 'bh-pie-chart.css',\n  shadow: true,\n})\nexport class BhPieChart {\n  /**\n   * Chart data containing series\n   */\n  @Prop() data: PieChartData = {\n    series: [\n      { name: 'Series 1', value: 30, color: '#2642CF' },\n      { name: 'Series 2', value: 25, color: '#8E4B9B' },\n      { name: 'Series 3', value: 20, color: '#BB81BA' },\n      { name: 'Series 4', value: 15, color: '#E14C94' },\n      { name: 'Series 5', value: 10, color: '#E47789' },\n    ],\n  };\n\n  /**\n   * Size of the donut hole\n   */\n  @Prop() hole: PieChartHole = 'none';\n\n  /**\n   * Size of the chart in pixels\n   */\n  @Prop() size: number = 160;\n\n  /**\n   * Whether to animate the chart\n   */\n  @Prop() animated: boolean = true;\n\n  /**\n   * Gap between segments in degrees\n   */\n  @Prop() gap: number = 0;\n\n  @State() tooltipVisible: boolean = false;\n  @State() tooltipX: number = 0;\n  @State() tooltipY: number = 0;\n  @State() tooltipSegment: PieSegment | null = null;\n\n  private getInnerRadius(): number {\n    switch (this.hole) {\n      case '25%':\n        return 20;\n      case '50%':\n        return 40;\n      case '75%':\n        return 60;\n      case '85%':\n        return 68;\n      default:\n        return 0;\n    }\n  }\n\n  private createArcPath(\n    centerX: number,\n    centerY: number,\n    outerRadius: number,\n    innerRadius: number,\n    startAngle: number,\n    endAngle: number\n  ): string {\n    const startAngleRad = (startAngle * Math.PI) / 180;\n    const endAngleRad = (endAngle * Math.PI) / 180;\n\n    const outerStartX = centerX + outerRadius * Math.cos(startAngleRad);\n    const outerStartY = centerY + outerRadius * Math.sin(startAngleRad);\n    const outerEndX = centerX + outerRadius * Math.cos(endAngleRad);\n    const outerEndY = centerY + outerRadius * Math.sin(endAngleRad);\n\n    const largeArcFlag = endAngle - startAngle > 180 ? 1 : 0;\n\n    if (innerRadius === 0) {\n      return [\n        'M', centerX, centerY,\n        'L', outerStartX, outerStartY,\n        'A', outerRadius, outerRadius, 0, largeArcFlag, 1, outerEndX, outerEndY,\n        'Z',\n      ].join(' ');\n    } else {\n      const innerStartX = centerX + innerRadius * Math.cos(startAngleRad);\n      const innerStartY = centerY + innerRadius * Math.sin(startAngleRad);\n      const innerEndX = centerX + innerRadius * Math.cos(endAngleRad);\n      const innerEndY = centerY + innerRadius * Math.sin(endAngleRad);\n\n      return [\n        'M', outerStartX, outerStartY,\n        'A', outerRadius, outerRadius, 0, largeArcFlag, 1, outerEndX, outerEndY,\n        'L', innerEndX, innerEndY,\n        'A', innerRadius, innerRadius, 0, largeArcFlag, 0, innerStartX, innerStartY,\n        'Z',\n      ].join(' ');\n    }\n  }\n\n  private getSegments(): PieSegment[] {\n    if (!this.data.series?.length) {\n      return [];\n    }\n\n    const total = this.data.series.reduce((sum, item) => sum + item.value, 0);\n    if (total === 0) {\n      return [];\n    }\n\n    const segments: PieSegment[] = [];\n    let currentAngle = -90;\n    const radius = 80;\n    const centerX = 80;\n    const centerY = 80;\n    const innerRadius = this.getInnerRadius();\n\n    const totalGaps = this.data.series.length * this.gap;\n    const availableAngle = 360 - totalGaps;\n\n    this.data.series.forEach((item, index) => {\n      const percentage = (item.value / total) * 100;\n      const angleSize = (item.value / total) * availableAngle;\n      const startAngle = currentAngle;\n      const endAngle = currentAngle + angleSize;\n\n      const path = this.createArcPath(centerX, centerY, radius, innerRadius, startAngle, endAngle);\n\n      segments.push({\n        value: item.value,\n        percentage,\n        startAngle,\n        endAngle,\n        color: item.color || DEFAULT_COLORS[index % DEFAULT_COLORS.length],\n        name: item.name,\n        path,\n      });\n\n      currentAngle = endAngle + this.gap;\n    });\n\n    return segments;\n  }\n\n  private handleSegmentHover = (event: MouseEvent, segment: PieSegment) => {\n    this.tooltipVisible = true;\n    this.tooltipX = event.clientX;\n    this.tooltipY = event.clientY;\n    this.tooltipSegment = segment;\n  };\n\n  private handleSegmentLeave = () => {\n    this.tooltipVisible = false;\n  };\n\n  render() {\n    const segments = this.getSegments();\n    const innerRadius = this.getInnerRadius();\n\n    return (\n      <Host>\n        <div class=\"pie-chart-container\" style={{ width: `${this.size}px`, height: `${this.size}px` }}>\n          <svg\n            width={this.size}\n            height={this.size}\n            viewBox=\"0 0 160 160\"\n            class=\"pie-chart-svg\"\n          >\n            {/* Background circle */}\n            <circle cx=\"80\" cy=\"80\" r=\"80\" fill=\"transparent\" class=\"pie-background\" />\n\n            {/* Pie segments */}\n            {segments.map((segment, index) => (\n              <g key={index} class=\"pie-segment-group\">\n                <path\n                  d={segment.path}\n                  fill={segment.color}\n                  class={{ 'pie-segment': true, animated: this.animated }}\n                  style={{ animationDelay: this.animated ? `${index * 0.03}s` : '0s' }}\n                  onMouseEnter={(e) => this.handleSegmentHover(e, segment)}\n                  onMouseLeave={this.handleSegmentLeave}\n                />\n              </g>\n            ))}\n\n            {/* Inner hole for donut charts */}\n            {this.hole !== 'none' && (\n              <circle cx=\"80\" cy=\"80\" r={innerRadius} fill=\"white\" class=\"pie-inner-hole\" />\n            )}\n          </svg>\n        </div>\n\n        {/* Tooltip */}\n        <bh-chart-tooltip\n          visible={this.tooltipVisible}\n          x={this.tooltipX}\n          y={this.tooltipY}\n          items={\n            this.tooltipSegment\n              ? [\n                  {\n                    label: this.tooltipSegment.name,\n                    value: `${this.tooltipSegment.percentage.toFixed(0)}%`,\n                    color: this.tooltipSegment.color,\n                  },\n                ]\n              : []\n          }\n        />\n      </Host>\n    );\n  }\n}\n"],"names":[],"mappings":"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"}