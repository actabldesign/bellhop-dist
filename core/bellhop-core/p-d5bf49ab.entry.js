import{r as e,c as r,h as t,H as o}from"./p-nAAobRRQ.js";const a=".property-switcher{position:relative;display:inline-block;width:220px}.property-selector{display:flex;align-items:center;justify-content:flex-start;gap:var(--spacing-xs);padding:var(--spacing-xs) var(--spacing-sm);border:none;background:transparent;cursor:pointer;border-radius:var(--radius-sm);transition:background-color 0.2s ease;width:100%;height:36px;min-width:0}.property-selector:hover{background-color:var(--color-neutral-100)}.selector-icon{font-size:18px;color:var(--color-neutral-500);flex-shrink:0}.property-name{font-family:var(--font-inter);font-weight:var(--weight-medium);font-size:var(--text-sm-size);line-height:var(--text-sm-line);color:var(--color-neutral-700);text-overflow:ellipsis;overflow:hidden;white-space:nowrap;flex-grow:1;min-width:0;text-align:left}.expand-icon{font-size:18px;flex-shrink:0;color:var(--color-neutral-400);transition:color 0.2s ease}.dropdown-panel{position:absolute;top:100%;left:0;z-index:1000;margin-top:var(--spacing-xs);background-color:var(--color-white);border:1px solid var(--color-neutral-200);border-radius:var(--radius-lg);box-shadow:0 4px 16px rgba(0, 0, 0, 0.12), 0 1px 4px rgba(0, 0, 0, 0.08);min-width:280px;max-width:360px;animation:dropdownSlideIn 0.15s ease-out;overflow:hidden}@keyframes dropdownSlideIn{0%{opacity:0;transform:translateY(-8px)}100%{opacity:1;transform:translateY(0)}}.search-container{display:flex;align-items:center;gap:var(--spacing-xs);padding:var(--spacing-sm);background-color:var(--color-white);border-bottom:1px solid var(--color-neutral-200)}.search-icon{font-size:20px;color:var(--color-neutral-500);flex-shrink:0}.search-input{flex:1;border:none;outline:none;font-family:var(--font-inter);font-size:var(--text-sm-size);line-height:var(--text-sm-line);color:var(--color-neutral-900);background:transparent;min-width:0}.search-input::placeholder{color:var(--color-neutral-400)}.clear-search{display:flex;align-items:center;justify-content:center;width:24px;height:24px;border:none;background:transparent;cursor:pointer;border-radius:var(--radius-sm);color:var(--color-neutral-400);transition:color 0.15s ease, background-color 0.15s ease}.clear-search:hover{color:var(--color-neutral-600);background-color:var(--color-neutral-200)}.clear-search .material-symbols-outlined{font-size:18px}.dropdown-content{max-height:360px;overflow-y:auto}.flat-list-container{padding:var(--spacing-xs) 0}.groups-container{padding:var(--spacing-xs) 0}.property-group{border-bottom:1px solid var(--color-neutral-100)}.property-group:last-child{border-bottom:none}.group-header{display:flex;align-items:center;gap:var(--spacing-xs);width:100%;padding:var(--spacing-sm) var(--spacing-md);border:none;background:var(--color-neutral-50);cursor:pointer;font-family:var(--font-inter);font-size:var(--text-xs-size);font-weight:var(--weight-semibold);color:var(--color-neutral-600);text-transform:uppercase;letter-spacing:0.5px;transition:background-color 0.15s ease}.group-header:hover{background-color:var(--color-neutral-200)}.group-expand-icon{font-size:18px;color:var(--color-neutral-500);transition:transform 0.15s ease}.group-name{flex:1;text-align:left}.group-count{font-size:11px;font-weight:var(--weight-semibold);color:var(--color-neutral-500);background-color:var(--color-neutral-200);padding:2px 8px;border-radius:var(--radius-full);min-width:20px;text-align:center}.group-properties{padding:var(--spacing-xs) 0}.property-item{display:flex;align-items:center;gap:var(--spacing-sm);width:100%;padding:var(--spacing-sm) var(--spacing-md);padding-left:calc(var(--spacing-md) + 26px);border:none;background:transparent;cursor:pointer;font-family:var(--font-inter);font-size:var(--text-sm-size);line-height:var(--text-sm-line);color:var(--color-neutral-700);text-align:left;transition:background-color 0.15s ease}.flat-list-container .property-item{padding-left:var(--spacing-md)}.property-item:hover{background-color:var(--color-neutral-100)}.property-item.selected{background-color:var(--color-brand-50);color:var(--color-brand-700)}.property-item.selected .property-icon{color:var(--color-brand-600)}.property-icon{font-size:20px;color:var(--color-neutral-400);flex-shrink:0}.property-item-name{flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:var(--weight-regular)}.property-item.selected .property-item-name{font-weight:var(--weight-medium)}.check-icon{font-size:18px;color:var(--color-brand-600);flex-shrink:0}.menu-divider{height:1px;background-color:var(--color-neutral-150);margin:var(--spacing-xs) var(--spacing-md)}.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-2xl) var(--spacing-lg);gap:var(--spacing-sm)}.empty-icon{font-size:40px;color:var(--color-neutral-300)}.empty-text{font-family:var(--font-inter);font-size:var(--text-sm-size);color:var(--color-neutral-500)}.dropdown-menu-container{position:absolute;top:100%;left:0;z-index:1000;margin-top:var(--spacing-xs);max-height:320px}.popover-container{position:absolute;top:100%;left:0;z-index:1000;margin-top:var(--spacing-xs);animation:popoverSlideIn 0.3s ease-out;transform-origin:top center}@keyframes popoverSlideIn{0%{opacity:0;transform:translateY(calc(-1 * var(--spacing-lg)))}100%{opacity:1;transform:translateY(0)}}.popover-container.closing{animation:popoverSlideOut 0.2s ease-in forwards}@keyframes popoverSlideOut{0%{opacity:1;transform:translateY(0)}100%{opacity:0;transform:translateY(calc(-1 * var(--spacing-lg)))}}";const n=class{constructor(t){e(this,t);this.bhPropertyChange=r(this,"bhPropertyChange")}selectedProperty="Select a property";properties=[];grouped=false;searchPlaceholder="Search properties...";bhPropertyChange;isExpanded=false;searchQuery="";expandedGroups=new Set;internalSelectedProperty="";switcherRef;searchInputRef;componentWillLoad(){this.internalSelectedProperty=this.selectedProperty}handleDocumentClick(e){if(!this.isExpanded){return}const r=e.composedPath().includes(this.switcherRef);if(!r){this.isExpanded=false}}handleToggle=()=>{this.isExpanded=!this.isExpanded;if(this.isExpanded){this.searchQuery="";if(this.grouped){const e=this.getPropertyGroups();this.expandedGroups=new Set(e.map((e=>e.id)))}setTimeout((()=>{if(this.searchInputRef){this.searchInputRef.focus()}}),50)}};handleSearchInput=e=>{const r=e.target;this.searchQuery=r.value};handleGroupToggle=e=>{const r=new Set(this.expandedGroups);if(r.has(e)){r.delete(e)}else{r.add(e)}this.expandedGroups=r};handlePropertySelect=e=>{this.internalSelectedProperty=e.name;this.bhPropertyChange.emit(e);this.isExpanded=false;this.searchQuery=""};getPropertyGroups=()=>{const e=new Map;const r=[];this.properties.forEach((t=>{if(t.group){const r=e.get(t.group)||[];r.push(t);e.set(t.group,r)}else{r.push(t)}}));const t=[];e.forEach(((e,r)=>{t.push({id:r.toLowerCase().replace(/\s+/g,"-"),name:r,properties:e})}));if(r.length>0){t.push({id:"ungrouped",name:"Other",properties:r})}return t};filterProperties=e=>{if(!this.searchQuery.trim()){return e}const r=this.searchQuery.toLowerCase();return e.filter((e=>e.name.toLowerCase().includes(r)))};filterGroups=e=>{if(!this.searchQuery.trim()){return e}const r=this.searchQuery.toLowerCase();return e.map((e=>{const t=e.name.toLowerCase().includes(r);const o=e.properties.filter((e=>e.name.toLowerCase().includes(r)));if(t){return{...e}}else if(o.length>0){return{...e,properties:o}}return null})).filter((e=>e!==null))};getPropertyIcon=e=>{switch(e){case"portfolio":return"business";case"region":return"public";case"property":default:return"location_on"}};renderSearchInput(){return t("div",{class:"search-container"},t("span",{class:"material-symbols-outlined search-icon"},"search"),t("input",{ref:e=>this.searchInputRef=e,type:"text",class:"search-input",placeholder:this.searchPlaceholder,value:this.searchQuery,onInput:this.handleSearchInput,onClick:e=>e.stopPropagation()}),this.searchQuery&&t("button",{class:"clear-search",onClick:e=>{e.stopPropagation();this.searchQuery="";this.searchInputRef?.focus()},"aria-label":"Clear search"},t("span",{class:"material-symbols-outlined"},"close")))}renderPropertyItem(e){const r=e.name===this.internalSelectedProperty;return t("button",{class:{"property-item":true,selected:r},onClick:()=>this.handlePropertySelect(e)},t("span",{class:"material-symbols-outlined property-icon"},this.getPropertyIcon(e.type)),t("span",{class:"property-item-name",title:e.name},e.name),r&&t("span",{class:"material-symbols-outlined check-icon"},"check"))}renderGroupedView(){const e=this.getPropertyGroups();const r=this.filterGroups(e);if(r.length===0){return this.renderEmptyState()}return t("div",{class:"groups-container"},r.map((e=>{const r=this.expandedGroups.has(e.id);return t("div",{class:"property-group",key:e.id},t("button",{class:{"group-header":true,expanded:r},onClick:()=>this.handleGroupToggle(e.id),"aria-expanded":r?"true":"false"},t("span",{class:"material-symbols-outlined group-expand-icon"},r?"expand_more":"chevron_right"),t("span",{class:"group-name"},e.name),t("span",{class:"group-count"},e.properties.length)),r&&t("div",{class:"group-properties"},e.properties.map((e=>t("div",{key:e.id},this.renderPropertyItem(e))))))})))}renderFlatView(){const e=this.filterProperties(this.properties);if(e.length===0){return this.renderEmptyState()}const r=[];e.forEach((e=>{if(e.type==="portfolio"){r.push(e);r.push({divider:true})}else if(e.type==="property"){r.push(e)}}));return t("div",{class:"flat-list-container"},r.map(((e,r)=>{if("divider"in e){return t("div",{class:"menu-divider",key:`divider-${r}`})}return t("div",{key:e.id},this.renderPropertyItem(e))})))}renderEmptyState(){return t("div",{class:"empty-state"},t("span",{class:"material-symbols-outlined empty-icon"},"search_off"),t("span",{class:"empty-text"},"No properties found"))}getSelectedProperty(){return this.properties.find((e=>e.name===this.internalSelectedProperty))}render(){const e={"property-switcher":true,expanded:this.isExpanded};const r=this.getSelectedProperty();const a=this.internalSelectedProperty||this.selectedProperty;return t(o,{key:"02541bacd9b48dbf5c8939ed6b4f9a08393e788c"},t("div",{key:"cb0f6de5ee67caa19e6a7022ec89347d81dbda7e",ref:e=>this.switcherRef=e,class:e},t("button",{key:"4fc5cd736389e8707d4c86ae319a721e685dc88a",class:"property-selector",onClick:()=>this.handleToggle(),"aria-expanded":this.isExpanded?"true":"false","aria-label":`Property selector: ${a}`},r&&t("span",{key:"dfe3c36f344113c8edb18c234dc0e9d81fbed9ef",class:"material-symbols-outlined selector-icon"},this.getPropertyIcon(r.type)),t("span",{key:"e83cbe7b26f6d8b94557003da87580dd00053acc",class:"property-name"},a),t("span",{key:"4f6d01218d1d60afaa148d375d911d2701d9b5bd",class:"material-symbols-outlined expand-icon","aria-label":this.isExpanded?"Collapse Options":"Expand Options"},this.isExpanded?"unfold_less":"unfold_more")),this.isExpanded&&t("div",{key:"9c6ee765cd36535305b9236d46ba96657aeac308",class:"dropdown-panel"},this.renderSearchInput(),t("div",{key:"5433d7a5ad985549a332cd7df7070d123ce98153",class:"dropdown-content"},this.grouped?this.renderGroupedView():this.renderFlatView()))))}};n.style=a;export{n as bh_property_switcher};
//# sourceMappingURL=p-d5bf49ab.entry.js.map