{"version":3,"file":"bh-pie-chart.js","sourceRoot":"","sources":["../../../src/components/bh-pie-chart/bh-pie-chart.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Prop, State, h, Host } from '@stencil/core';\n\nexport interface PieChartSeriesItem {\n  name: string;\n  value: number;\n  color?: string;\n}\n\nexport interface PieChartData {\n  series: PieChartSeriesItem[];\n}\n\nexport interface PieSegment {\n  value: number;\n  percentage: number;\n  startAngle: number;\n  endAngle: number;\n  color: string;\n  name: string;\n  path: string;\n}\n\nexport type PieChartHole = 'none' | '25%' | '50%' | '75%' | '85%';\n\nconst DEFAULT_COLORS = [\n  '#2642CF', // Blue\n  '#8E4B9B', // Purple\n  '#BB81BA', // Light Purple\n  '#E14C94', // Pink\n  '#E47789', // Coral\n  '#E9AAAE', // Light Coral\n  '#BACEFC', // Light Blue\n];\n\n@Component({\n  tag: 'bh-pie-chart',\n  styleUrl: 'bh-pie-chart.css',\n  shadow: true,\n})\nexport class BhPieChart {\n  /**\n   * Chart data containing series\n   */\n  @Prop() data: PieChartData = {\n    series: [\n      { name: 'Series 1', value: 30, color: '#2642CF' },\n      { name: 'Series 2', value: 25, color: '#8E4B9B' },\n      { name: 'Series 3', value: 20, color: '#BB81BA' },\n      { name: 'Series 4', value: 15, color: '#E14C94' },\n      { name: 'Series 5', value: 10, color: '#E47789' },\n    ],\n  };\n\n  /**\n   * Size of the donut hole\n   */\n  @Prop() hole: PieChartHole = 'none';\n\n  /**\n   * Size of the chart in pixels\n   */\n  @Prop() size: number = 160;\n\n  /**\n   * Whether to animate the chart\n   */\n  @Prop() animated: boolean = true;\n\n  /**\n   * Gap between segments in degrees\n   */\n  @Prop() gap: number = 0;\n\n  @State() tooltipVisible: boolean = false;\n  @State() tooltipX: number = 0;\n  @State() tooltipY: number = 0;\n  @State() tooltipSegment: PieSegment | null = null;\n\n  private getInnerRadius(): number {\n    switch (this.hole) {\n      case '25%':\n        return 20;\n      case '50%':\n        return 40;\n      case '75%':\n        return 60;\n      case '85%':\n        return 68;\n      default:\n        return 0;\n    }\n  }\n\n  private createArcPath(\n    centerX: number,\n    centerY: number,\n    outerRadius: number,\n    innerRadius: number,\n    startAngle: number,\n    endAngle: number\n  ): string {\n    const startAngleRad = (startAngle * Math.PI) / 180;\n    const endAngleRad = (endAngle * Math.PI) / 180;\n\n    const outerStartX = centerX + outerRadius * Math.cos(startAngleRad);\n    const outerStartY = centerY + outerRadius * Math.sin(startAngleRad);\n    const outerEndX = centerX + outerRadius * Math.cos(endAngleRad);\n    const outerEndY = centerY + outerRadius * Math.sin(endAngleRad);\n\n    const largeArcFlag = endAngle - startAngle > 180 ? 1 : 0;\n\n    if (innerRadius === 0) {\n      return [\n        'M', centerX, centerY,\n        'L', outerStartX, outerStartY,\n        'A', outerRadius, outerRadius, 0, largeArcFlag, 1, outerEndX, outerEndY,\n        'Z',\n      ].join(' ');\n    } else {\n      const innerStartX = centerX + innerRadius * Math.cos(startAngleRad);\n      const innerStartY = centerY + innerRadius * Math.sin(startAngleRad);\n      const innerEndX = centerX + innerRadius * Math.cos(endAngleRad);\n      const innerEndY = centerY + innerRadius * Math.sin(endAngleRad);\n\n      return [\n        'M', outerStartX, outerStartY,\n        'A', outerRadius, outerRadius, 0, largeArcFlag, 1, outerEndX, outerEndY,\n        'L', innerEndX, innerEndY,\n        'A', innerRadius, innerRadius, 0, largeArcFlag, 0, innerStartX, innerStartY,\n        'Z',\n      ].join(' ');\n    }\n  }\n\n  private getSegments(): PieSegment[] {\n    if (!this.data.series?.length) {\n      return [];\n    }\n\n    const total = this.data.series.reduce((sum, item) => sum + item.value, 0);\n    if (total === 0) {\n      return [];\n    }\n\n    const segments: PieSegment[] = [];\n    let currentAngle = -90;\n    const radius = 80;\n    const centerX = 80;\n    const centerY = 80;\n    const innerRadius = this.getInnerRadius();\n\n    const totalGaps = this.data.series.length * this.gap;\n    const availableAngle = 360 - totalGaps;\n\n    this.data.series.forEach((item, index) => {\n      const percentage = (item.value / total) * 100;\n      const angleSize = (item.value / total) * availableAngle;\n      const startAngle = currentAngle;\n      const endAngle = currentAngle + angleSize;\n\n      const path = this.createArcPath(centerX, centerY, radius, innerRadius, startAngle, endAngle);\n\n      segments.push({\n        value: item.value,\n        percentage,\n        startAngle,\n        endAngle,\n        color: item.color || DEFAULT_COLORS[index % DEFAULT_COLORS.length],\n        name: item.name,\n        path,\n      });\n\n      currentAngle = endAngle + this.gap;\n    });\n\n    return segments;\n  }\n\n  private handleSegmentHover = (event: MouseEvent, segment: PieSegment) => {\n    this.tooltipVisible = true;\n    this.tooltipX = event.clientX;\n    this.tooltipY = event.clientY;\n    this.tooltipSegment = segment;\n  };\n\n  private handleSegmentLeave = () => {\n    this.tooltipVisible = false;\n  };\n\n  render() {\n    const segments = this.getSegments();\n    const innerRadius = this.getInnerRadius();\n\n    return (\n      <Host>\n        <div class=\"pie-chart-container\" style={{ width: `${this.size}px`, height: `${this.size}px` }}>\n          <svg\n            width={this.size}\n            height={this.size}\n            viewBox=\"0 0 160 160\"\n            class=\"pie-chart-svg\"\n          >\n            {/* Background circle */}\n            <circle cx=\"80\" cy=\"80\" r=\"80\" fill=\"transparent\" class=\"pie-background\" />\n\n            {/* Pie segments */}\n            {segments.map((segment, index) => (\n              <g key={index} class=\"pie-segment-group\">\n                <path\n                  d={segment.path}\n                  fill={segment.color}\n                  class={{ 'pie-segment': true, animated: this.animated }}\n                  style={{ animationDelay: this.animated ? `${index * 0.03}s` : '0s' }}\n                  onMouseEnter={(e) => this.handleSegmentHover(e, segment)}\n                  onMouseLeave={this.handleSegmentLeave}\n                />\n              </g>\n            ))}\n\n            {/* Inner hole for donut charts */}\n            {this.hole !== 'none' && (\n              <circle cx=\"80\" cy=\"80\" r={innerRadius} fill=\"white\" class=\"pie-inner-hole\" />\n            )}\n          </svg>\n        </div>\n\n        {/* Tooltip */}\n        <bh-chart-tooltip\n          visible={this.tooltipVisible}\n          x={this.tooltipX}\n          y={this.tooltipY}\n          items={\n            this.tooltipSegment\n              ? [\n                  {\n                    label: this.tooltipSegment.name,\n                    value: `${this.tooltipSegment.percentage.toFixed(0)}%`,\n                    color: this.tooltipSegment.color,\n                  },\n                ]\n              : []\n          }\n        />\n      </Host>\n    );\n  }\n}\n"]}