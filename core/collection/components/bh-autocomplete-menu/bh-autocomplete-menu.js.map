{"version":3,"file":"bh-autocomplete-menu.js","sourceRoot":"","sources":["../../../src/components/bh-autocomplete-menu/bh-autocomplete-menu.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Prop, Event, EventEmitter, State, Watch, h, Host } from '@stencil/core';\n\nexport interface AutocompleteMenuItem {\n  id: string;\n  label: string;\n  disabled?: boolean;\n  selected?: boolean;\n}\n\n@Component({\n  tag: 'bh-autocomplete-menu',\n  styleUrl: 'bh-autocomplete-menu.css',\n  shadow: true,\n})\nexport class BhAutocompleteMenu {\n  /**\n   * Array of menu items\n   */\n  @Prop() menuItems: AutocompleteMenuItem[] = [];\n\n  /**\n   * Whether the menu is visible\n   */\n  @Prop() visible: boolean = false;\n\n  /**\n   * Currently selected item index\n   */\n  @Prop() selectedIndex: number = -1;\n\n  /**\n   * Maximum height of the menu in pixels\n   */\n  @Prop() maxHeight: number = 280;\n\n  /**\n   * Enable multi-select mode with checkmarks\n   */\n  @Prop() multiSelect: boolean = false;\n\n  /**\n   * Search query for highlighting text\n   */\n  @Prop() searchQuery: string = '';\n\n  /**\n   * Event emitted when an item is clicked\n   */\n  @Event() bhItemClick!: EventEmitter<AutocompleteMenuItem>;\n\n  /**\n   * Event emitted when an item is hovered\n   */\n  @Event() bhItemHover!: EventEmitter<number>;\n\n  @State() isAnimating: boolean = false;\n  @State() shouldRender: boolean = false;\n  @State() items: AutocompleteMenuItem[] = [];\n\n  @Watch('visible')\n  watchVisible(newValue: boolean) {\n    if (newValue) {\n      this.shouldRender = true;\n      this.isAnimating = false;\n    } else {\n      this.isAnimating = true;\n      setTimeout(() => {\n        this.shouldRender = false;\n        this.isAnimating = false;\n      }, 150);\n    }\n  }\n\n  @Watch('menuItems')\n  watchMenuItems(newValue: AutocompleteMenuItem[]) {\n    this.items = [...newValue];\n  }\n\n  componentWillLoad() {\n    this.shouldRender = this.visible;\n    this.items = [...this.menuItems];\n  }\n\n  private handleItemClick = (item: AutocompleteMenuItem) => {\n    if (!item.disabled) {\n      if (this.multiSelect) {\n        // Toggle selection in multi-select mode\n        this.items = this.items.map(i =>\n          i.id === item.id ? { ...i, selected: !i.selected } : i\n        );\n        const updatedItem = this.items.find(i => i.id === item.id)!;\n        this.bhItemClick.emit(updatedItem);\n      } else {\n        this.bhItemClick.emit(item);\n      }\n    }\n  };\n\n  private handleItemMouseEnter = (index: number) => {\n    this.bhItemHover.emit(index);\n  };\n\n  private handleMouseDown = (e: MouseEvent) => {\n    e.preventDefault();\n  };\n\n  private getMenuClasses = () => {\n    return {\n      'autocomplete-menu': true,\n      'animate-dropdown-exit': this.isAnimating && !this.visible,\n      'animate-dropdown-enter': this.visible && !this.isAnimating,\n    };\n  };\n\n  private getItemClasses = (index: number, item: AutocompleteMenuItem) => {\n    return {\n      'autocomplete-item': true,\n      'disabled': !!item.disabled,\n      'selected': index === this.selectedIndex,\n    };\n  };\n\n  private getHighlightedText = (text: string) => {\n    if (!this.searchQuery || this.searchQuery.length < 3) {\n      return text;\n    }\n\n    const regex = new RegExp(`(${this.searchQuery})`, 'gi');\n    const parts = text.split(regex);\n\n    return parts.map((part, index) =>\n      regex.test(part) ? (\n        <span key={index} class=\"highlight\">{part}</span>\n      ) : (\n        <span key={index}>{part}</span>\n      )\n    );\n  };\n\n  render() {\n    if (!this.shouldRender || this.items.length === 0) {\n      return null;\n    }\n\n    return (\n      <Host>\n        <div\n          class={this.getMenuClasses()}\n          style={{ maxHeight: `${this.maxHeight}px` }}\n        >\n          {this.items.map((item, index) => (\n            <div\n              key={item.id}\n              class={this.getItemClasses(index, item)}\n              onMouseEnter={() => this.handleItemMouseEnter(index)}\n              role=\"option\"\n              aria-selected={index === this.selectedIndex ? 'true' : 'false'}\n              aria-disabled={item.disabled ? 'true' : 'false'}\n            >\n              <div\n                class=\"item-content\"\n                onClick={() => this.handleItemClick(item)}\n                onMouseDown={this.handleMouseDown}\n              >\n                <span class=\"item-text\" title={item.label}>\n                  {this.getHighlightedText(item.label)}\n                </span>\n                {this.multiSelect && item.selected && (\n                  <span class=\"check-icon material-symbols-outlined\">\n                    check\n                  </span>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n      </Host>\n    );\n  }\n}\n"]}